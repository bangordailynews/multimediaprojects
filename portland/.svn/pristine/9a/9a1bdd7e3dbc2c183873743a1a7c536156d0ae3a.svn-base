function sizeFunctions(){$("#intro").css({width:$(window).width(),height:$(window).height()})}function setUpVideos(a){$("video").each(function(){a[$(this).get(0).id]=_V_($(this).get(0).id)}),$("video").hover(function(){0===this.currentTime&&this.play()});for(var b in a)a.hasOwnProperty(b)&&"big-video-vid_html5_api"!==b&&(a[b].on("firstplay",function(){ga("send",{hitType:"event",eventCategory:"portland-project",eventAction:"Played Video",eventLabel:$(this).get(0).id()})}),a[b].on("ended",function(){ga("send",{hitType:"event",eventCategory:"portland-project",eventAction:"Completed Video",eventLabel:$(this).get(0).id()})}),a[b].on("pause",function(){ga("send",{hitType:"event",eventCategory:"portland-project",eventAction:"Paused Video",eventLabel:$(this).get(0).id(),eventValue:a[$(this).get(0).id()].currentTime()})}))}Handlebars.registerHelper("multimedia",function(){"use strict";if(this.filename)if("video"===this.filetype){var a=this.filename.split("/"),b=a[a.length-1],c=b.split(".");this.fileID=c[0]}else{var a=this.filename.split(".");this.fileID=a[0].replace(" ","-")}else this.fileID="";switch(this.captionFormatted=this.caption&&"text"!==this.filetype&&""!==this.credit?'<p class="caption">'+this.caption+' <span class="credit">('+this.credit+")</span></p>":"",this.filetype){case"text":return"<p>"+this.caption+"</p>";case"video":return'             <div class="rich-media video-media size-'+this.size+" orientation-"+this.orientation+'">                 <video id="video-'+this.fileID+'" controls preload width="auto" height="auto" data-setup="{}" class="video video-js vjs-default-skin" poster="images/'+this.poster+'">                     <source type="video/mp4" src="http://watchvideo.bangordailynews.com/bdn/2014/06/'+this.filename+'" />                 </video>                 <p class="caption">'+this.caption+"</p>               </div>";case"photo":return'               <div id="photo-'+this.fileID+'" class="rich-media photo size-'+this.size+" orientation-"+this.orientation+'">                   <img class="lazy" data-original="images/'+this.filename+'" alt="'+this.caption+'" />                 '+this.captionFormatted+"               </div>";case"graphic":return'               <div id="graphic-'+this.fileID+'" class="rich-media photo graphic size-'+this.size+" orientation-"+this.orientation+'">                   <a href="images/'+this.filename+'">                     <img class="lazy" data-original="images/'+this.filename+'" alt="'+this.caption+'" />                   </a>                   <p class="caption">'+this.caption+"</p>              </div>";default:return}}),$(function(){var a=new Object,b=Handlebars.compile($("#card-template").html()),c=new $.BigVideo({container:$("#intro")});c.init(),Modernizr.touch?c.show("images/priced-out-static-image.png"):c.show("http://watchvideo.bangordailynews.com/bdn/2014/06/port_proj_cine_1719549.m4v",{ambient:!0}),sizeFunctions(),$.getJSON("data/chapters.json",function(c){$.each(c,function(c,d){$.getJSON("data/"+d.name+".json",function(c){$.each(c.chapters,function(a,c){console.log(c),c.index=a,$("#chapters").append(b(c))}),$("img.lazy").lazyload({effect:"fadeIn"}),setUpVideos(a),sizeFunctions()})})}),$.fn.isOnScreen=function(){var a=$(window),b={top:a.scrollTop(),left:a.scrollLeft()};b.right=b.left+a.width(),b.bottom=b.top+a.height();var c=this.offset();return c.right=c.left+this.outerWidth(),c.bottom=c.top+this.outerHeight(),!(b.right<c.left||b.left>c.right||b.bottom<c.top||b.top>c.bottom)},$(window).scroll(function(){$(".rich-media .video-js").each(function(){$(this).isOnScreen()===!1&&a[$(this).attr("id")].pause()})})}),$(window).resize(function(){sizeFunctions()});